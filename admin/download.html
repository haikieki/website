<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ファイルダウンロード | 管理画面</title>
  <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
  <style>
    body { font-family: sans-serif; max-width: 700px; margin: 40px auto; padding: 0 20px; background: #f5f5f5; color: #333; }
    h1 { font-size: 1.4rem; border-bottom: 2px solid #2d6a4f; padding-bottom: 10px; }
    .card { background: #fff; border-radius: 8px; padding: 24px; margin-bottom: 20px; box-shadow: 0 1px 4px rgba(0,0,0,.1); }
    .card h2 { font-size: 1rem; margin: 0 0 16px; color: #2d6a4f; }
    .dl-list { list-style: none; padding: 0; margin: 0; }
    .dl-list li { display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 1px solid #eee; }
    .dl-list li:last-child { border-bottom: none; }
    .dl-list .filename { font-size: 0.95rem; }
    .btn { display: inline-block; padding: 6px 16px; background: #2d6a4f; color: #fff; border-radius: 4px; text-decoration: none; font-size: 0.85rem; }
    .btn:hover { background: #1e4d38; }
    .btn-zip { background: #1565c0; }
    .btn-zip:hover { background: #0d47a1; }
    .back { display: inline-block; margin-bottom: 20px; color: #2d6a4f; text-decoration: none; font-size: 0.9rem; }
    .back:hover { text-decoration: underline; }
    #login-notice { display: none; text-align: center; padding: 60px 20px; }
    #main-content { display: none; }
  </style>
</head>
<body>

<div id="login-notice">
  <p>ログインが必要です。</p>
  <button onclick="netlifyIdentity.open()" style="padding:10px 24px;background:#2d6a4f;color:#fff;border:none;border-radius:4px;cursor:pointer;font-size:1rem;">ログイン</button>
</div>

<div id="main-content">
  <a href="/admin/" class="back">← 管理画面に戻る</a>
  <h1>ファイルダウンロード</h1>

  <div class="card">
    <h2>HTMLファイル</h2>
    <ul class="dl-list">
      <li><span class="filename">index.html（トップページ）</span><a href="/index.html" download class="btn">DL</a></li>
      <li><span class="filename">national_housing_reform_specialist.html</span><a href="/national_housing_reform_specialist.html" download class="btn">DL</a></li>
      <li><span class="filename">guide.html（いいリフォームをするために）</span><a href="/guide.html" download class="btn">DL</a></li>
      <li><span class="filename">voices.html（資格保有者の声）</span><a href="/voices.html" download class="btn">DL</a></li>
      <li><span class="filename">search.html（資格保有者検索）</span><a href="/search.html" download class="btn">DL</a></li>
      <li><span class="filename">contact.html（お問合せ）</span><a href="/contact.html" download class="btn">DL</a></li>
    </ul>
  </div>

  <div class="card">
    <h2>データファイル（JSON）</h2>
    <ul class="dl-list">
      <li><span class="filename">data/home.json</span><a href="/data/home.json" download class="btn">DL</a></li>
      <li><span class="filename">data/specialist.json</span><a href="/data/specialist.json" download class="btn">DL</a></li>
      <li><span class="filename">data/guide.json</span><a href="/data/guide.json" download class="btn">DL</a></li>
      <li><span class="filename">data/voices.json</span><a href="/data/voices.json" download class="btn">DL</a></li>
    </ul>
  </div>

  <div class="card">
    <h2>全ファイル一括ダウンロード（ZIP）</h2>
    <p style="font-size:0.9rem;color:#555;margin:0 0 12px;">GitHubからすべてのファイルをまとめてダウンロードできます。</p>
    <a href="https://github.com/haikieki/website/archive/refs/heads/main.zip" class="btn btn-zip" target="_blank">全ファイルをZIPでDL</a>
  </div>
</div>

<script>
  netlifyIdentity.on('init', function(user) {
    if (user) {
      document.getElementById('main-content').style.display = 'block';
    } else {
      document.getElementById('login-notice').style.display = 'block';
    }
  });
  netlifyIdentity.on('login', function() {
    document.getElementById('login-notice').style.display = 'none';
    document.getElementById('main-content').style.display = 'block';
  });
  netlifyIdentity.on('logout', function() {
    document.getElementById('main-content').style.display = 'none';
    document.getElementById('login-notice').style.display = 'block';
  });
</script>
</body>
</html>
